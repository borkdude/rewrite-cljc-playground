#+TITLE: rewrite-cljc notes

* Todos
** TODO cleanup coerce record support
   See TODOs in code.
** TODO refine cljs namespace alias lookup
    Allow a client to provide a resolver fn rather than just a data binding.  The default will be clojure tools reader *ns-alias* but
    should be over-rideable to whatever the client wants.
** TODO make a coherent commit history from my spike experiments?
    My path was circuitous.. and based off rewrite-cljs... can/I/should/I do some major squashing?
** TODO look at graalvm support
   Working on strategy to run all tests within available RAM on Github Actions.
   Do have something working on Drone Cloud which has a generous amount of RAM available.
** TODO reconsider version scheme
    looks like olical's depot has special treatment of qualifiers which won't find upgrades
    with default options.  I don't think using a qualifier (like alpha) wrong, but might
    reconsider because of depot behaviour.
** Testing
*** TODO what is browser target for cljs?
    noticed that cljs-test-runner explicitly sets :browser for target
    my scripts override target to nil... and probably should not.
    what does it mean to run with a cljs target of nil in a browser?
*** TODO review cljs specific tests
    - node_test.cljs
    - zip_tests.cljs
** Docs & API
*** TODO push along my PR to support import-vars in cljs for cljdoc
*** TODO push along my PR to support asciidoc formatting for cljdoc
     My docs kind of look horrible in cljdoc right now.
*** TODO verify my guess at doc string for rewrite-clj prefix and suffix fns
*** TODO subedit could use some examples
** Review all TODOS in source code
** Language differences from library perspective
*** TODO parsing the language specific
   rewrite-clj should be able to parse and rewrite clojure and clojurescript from clojure or clojurescript.
   But there are differences between the languages.
   If I read in a clj/cljs file, make no changes, and spit it out, I should get the same result.
**** TODO test handling a very large int in cljs
     cljs.user=> 1234567890123456789012345678901234567890
     1.2345678901234568e+39

     (edn/read-string "1234567890123456789012345678901234567890")
     1.2345678901234568e+39
*** TODO experiment with coerce across lang differences
*** TODO verify not using sepxr internally - it can lead to exceptions
** Deployment
*** TODO deploy scripts
    Am moving away form lein to tools deps.  For cldoc-exerciser, I tried using maven to package and deploy.
    This seems to be a solid way to go and avoids the confusion of the many competing clojure libraries.
    Consider using garmamond to update the pom - doing that with maven was a bit awkward/slow.
*** TODO migrate to clj-commons
    This project will replace rewrite-cljs on clj-commons as rewrite-cljc
    Commit history - I have preserved commit history from rewrite-cljs which shares some history with rewrite-clj.
    Git issues - Also be nice to preserve git issues. I think I can transfer over any git issues I created here to clj-commons/rewrite-cljs.

* Later
** TODO consider speculative kaocha plugin
** TODO consider spec
